<script lang="ts">
	import { browser } from '$app/environment';
	import { page } from '$app/stores';
	import NavPopover from '$lib/components/NavPopover.svelte';
	import { getUser } from '@lucia-auth/sveltekit/client';
	import { onMount } from 'svelte';
	import PhX from '~icons/ph/x';

	const user = getUser();

	let verified = true;
	if ($user && !$user.email_verified) {
		verified = false;
	}

	function handleClick() {
		verified = !verified;
	}

	let loaded = false;
	let hover = false;
	let screen_width: number;

	let dark = false;

	if (browser) {
		dark = window.matchMedia('(prefers-color-scheme: dark)').matches;
		// console.log('dark mode?: ' + dark);
		window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
			dark = e.matches;
			// console.log('dark mode?: ' + dark);
		});
	}

	onMount(() => {
		loaded = true;
		setTimeout(() => {
			hover = true;
		}, 600);
	});
</script>

<svelte:window bind:innerWidth={screen_width} />

<header class="flex flex-col">
	{#if !verified}
		<div class="flex h-14 w-screen items-center justify-center bg-amber-300 text-xs sm:text-lg">
			<div class="mr-3">
				<a href="/verify">
					Please check your email and follow the link to verify your email address
				</a>
			</div>
			<!-- svelte-ignore a11y-click-events-have-key-events -->
			<button
				class="flex h-[30px] w-[30px] translate-y-[1.5px] items-center justify-center rounded-full hover:bg-black hover:bg-opacity-5"
				on:click={handleClick}
			>
				<PhX class="inline text-[20px]" />
			</button>
		</div>
	{/if}

	<div
		class="mx-auto my-5 flex w-full max-w-full justify-between px-5 md:my-12 md:w-10/12 md:px-0 xl:max-w-screen-xl"
	>
		<nav>
			<ul>
				<div id="logo" class="mr-10">
					<a href={$user ? '/dashboard' : '/'}>
						<div class="w-0 opacity-0 md:w-full md:max-w-[300px] md:opacity-100">
							<svg xmlns="http://www.w3.org/2000/svg" width="300" height="47.17">
								<g fill="#729343" data-fill-palette-color="accent" style="display:inline">
									<path
										d="M938.367 127.157a3.645 3.645 0 0 1-2.195-.733l-29.306-21.98a3.664 3.664 0 0 1 4.396-5.861l29.306 21.98a3.664 3.664 0 0 1-2.2 6.594zm21.98 29.307c-.737 0-1.48-.222-2.126-.683l-51.287-36.633a3.664 3.664 0 0 1 4.259-5.962l51.286 36.633a3.664 3.664 0 0 1-2.132 6.645z"
										data-fill-palette-color="accent"
										style="display:inline"
										transform="translate(-.563) scale(.30147)"
									/>
									<path
										d="M292.696 4.011c.459-.52.33-1.33-.268-1.682A16.848 16.848 0 0 0 283.876 0c-4.189 0-8.146 1.535-11.144 4.322-3.07 2.853-4.76 6.696-4.76 10.82.001 7.34 2.21 7.286 2.21 0 0-7.13 6.143-12.933 13.694-12.933 2.184 0 4.34.487 6.31 1.428"
										data-fill-palette-color="accent"
										style="display:inline;fill:#729343;fill-opacity:1;stroke-width:.11044"
									/>
									<path
										d="M316 469.553H136c-5.523 0-10-4.478-10-10V335.148c0-5.522 4.477-10 10-10s10 4.478 10 10v114.404h160v-100c0-5.522 4.478-10 10-10h50v-15.596c0-5.522 4.478-10 10-10s10 4.478 10 10v25.596c0 5.522-4.478 10-10 10h-50v100c0 5.523-4.478 10.001-10 10.001zM192.137 78.763c-4.155-4.71-2.99-12.039 2.421-15.227C217.954 49.74 244.732 42.447 272 42.447c37.925 0 73.761 13.897 100.906 39.13C400.695 107.409 416 142.204 416 179.553v80c0 5.522-4.478 10-10 10h-20v4.404c0 5.522-4.478 10-10 10s-10-4.478-10-10v-14.404c0-5.523 4.478-10 10-10h20v-70c0-64.572-55.626-117.105-124-117.105a132.681 132.681 0 0 0-57.146 12.923m-68.856 130.54.002 79.237c0 5.523-4.477 10-10 10s-10-4.478-10-10V186.49c0-8.624 13.547-5.724 19.998 0"
										data-fill-palette-color="accent"
										style="display:inline"
										transform="translate(254.058 -4.688) scale(.11044)"
									/>
									<g id="right-leaf" class:before-load-right={!loaded} class:hover>
										<path
											d="M933.114 21.7c-17.02 5.479-17.166 5.333-17.166 5.333s-3.125 31.696-7.195 34.12c-4.07 2.426 20.855-7.969 22.974-16.88 2.118-8.913 3.871-9.205 1.387-22.573z"
											style="display:inline;fill:{dark ? '#262626' : '#fefbf6'};fill-opacity:1"
											transform="translate(2.27 .252) scale(.30147)"
										/>
										<path
											d="M190.384 219.553a10.003 10.003 0 0 1-9.763-7.872 112.09 112.09 0 0 1-1.531-7.686 9.999 9.999 0 0 1 6.983-11.209c6.763-6.322 12.394-13.482 16.768-21.33 6.732-12.081 10.153-25.109 10.167-38.721v-.092c0-5.103-.502-10.234-1.493-15.253a10.002 10.002 0 0 1 3.593-9.769 101.022 101.022 0 0 1 19.383-12.077c11.55-5.495 24.076-8.857 37.227-9.996a10.005 10.005 0 0 1 10.586 7.63c2.038 8.492 3.071 17.134 3.071 25.685 0 4.483-.287 8.984-.853 13.377-2.151 16.729-8.185 32.068-17.931 45.591-9.969 13.834-22.952 24.571-38.586 31.911-11.182 5.25-23.305 8.512-36.035 9.696l-.344.037.103-.01a15.84 15.84 0 0 1-.552.055 9.208 9.208 0 0 1-.793.033zm41.792-99.68c.553 4.238.832 8.512.832 12.771v.113c-.018 17.053-4.29 33.349-12.697 48.436a105.662 105.662 0 0 1-9.237 13.865 84.817 84.817 0 0 0 8.433-3.417c12.52-5.878 22.903-14.458 30.861-25.501 7.779-10.794 12.597-23.058 14.32-36.451.457-3.551.688-7.192.688-10.825 0-4.043-.284-8.116-.849-12.182-7.508 1.394-14.691 3.711-21.444 6.923a81.354 81.354 0 0 0-10.907 6.268z"
											data-fill-palette-color="accent"
											style="display:inline"
											transform="translate(254.058 -4.688) scale(.11044)"
										/>
									</g>
									<g id="left-leaf" class:before-load-left={!loaded} class:hover>
										<path
											d="M885.637 20.6c17.02 5.478 17.166 5.332 17.166 5.332s3.125 31.696 7.195 34.12c4.07 2.426-20.855-7.969-22.973-16.88-2.119-8.912-3.872-9.205-1.388-22.572z"
											style="display:inline;fill:{dark ? '#262626' : '#fefbf6'};fill-opacity:1"
											transform="translate(-.563) scale(.30147)"
										/>
										<path
											d="M914.331 64.856c-.112 0-.225-.005-.338-.015-4.67-.433-9.118-1.628-13.22-3.554a36.805 36.805 0 0 1-8.794-5.78 36.24 36.24 0 0 1-5.341-5.91c-3.57-4.954-5.78-10.573-6.569-16.702a38.61 38.61 0 0 1-.312-4.902c0-3.132.378-6.297 1.125-9.408a3.666 3.666 0 0 1 3.878-2.795c4.818.417 9.406 1.65 13.637 3.662a37.178 37.178 0 0 1 5.6 3.307l.205.145c.214.15.428.302.636.46a3.663 3.663 0 0 1 1.372 3.687 28.96 28.96 0 0 0-.64 6.007c0 5.063 1.27 9.878 3.777 14.34 1.755 3.126 4.07 5.962 6.88 8.433a3.663 3.663 0 0 1 1.196 2.153 34.3 34.3 0 0 0 .47 2.356 3.664 3.664 0 0 1-3.562 4.516zm-26.937-41.324a32.532 32.532 0 0 0-.31 4.461c0 1.33.085 2.665.252 3.967.631 4.907 2.396 9.399 5.246 13.353a28.906 28.906 0 0 0 4.26 4.714 29.469 29.469 0 0 0 7.045 4.628c.68.319 1.37.613 2.073.882a38.482 38.482 0 0 1-3-4.55c-3.086-5.492-4.717-11.682-4.717-17.9v-.038c.002-1.7.126-3.405.368-5.096a29.36 29.36 0 0 0-3.361-1.885 31.747 31.747 0 0 0-7.856-2.536z"
											data-fill-palette-color="accent"
											style="display:inline;stroke-width:.366334"
											transform="translate(-.563) scale(.30147)"
										/>
									</g>
									<path
										d="M164.143 73.92c-50.767 0-51.695 113.017-.105 113.017 53.588 0 51.966-113.017.105-113.017z"
										style="display:inline;fill:{dark ? '#262626' : '#fefbf6'};fill-opacity:{loaded
											? 1
											: 0};stroke-width:2.72975"
										transform="translate(256.89 -4.436) scale(.11044)"
									/>
									<path
										d="M164.014 210.716a9.98 9.98 0 0 1-6.544-2.438 26.47 26.47 0 0 1-.584-.522l-.186-.168c-9.365-8.231-17.108-17.734-23.009-28.24-8.423-14.991-12.875-31.888-12.875-48.863v-.101a99.032 99.032 0 0 1 2.192-20.557 100.912 100.912 0 0 1 10.251-27.418c6.167-11.2 14.372-21.243 24.39-29.848a10.001 10.001 0 0 1 13.048.013 111.996 111.996 0 0 1 10.797 10.683c5.386 6.108 10.031 12.747 13.81 19.735 4.82 8.922 8.248 18.424 10.187 28.246a99.004 99.004 0 0 1 1.872 19.125v.103c-.018 17.063-4.29 33.36-12.697 48.447-6.143 11.02-14.262 20.907-24.134 29.388a9.985 9.985 0 0 1-6.518 2.415zm.13-136.796c-5.283 5.515-9.76 11.588-13.365 18.136a80.846 80.846 0 0 0-6.627 15.796 79.71 79.71 0 0 0-1.586 6.157 79.053 79.053 0 0 0-1.75 16.398c0 13.82 3.47 26.965 10.312 39.144 3.508 6.246 7.834 12.069 12.91 17.386 5.178-5.408 9.586-11.356 13.156-17.762 6.732-12.081 10.153-25.11 10.167-38.721v-.092a78.93 78.93 0 0 0-1.493-15.252c-1.55-7.85-4.295-15.456-8.16-22.61-3.058-5.654-6.832-11.043-11.216-16.016a91.518 91.518 0 0 0-2.349-2.564z"
										data-fill-palette-color="accent"
										style="display:inline"
										transform="translate(256.89 -4.436) scale(.11044)"
									/>
								</g>
								<path
									fill="#729343"
									d="M24.563 8.271v2.31H13.62v29.63h-2.695V10.58H0V8.271Zm7.152-1.752v13.97q1.294-2.129 3.315-3.287 2.012-1.16 4.402-1.16 3.819 0 5.687 2.148 1.86 2.147 1.887 6.45v15.57h-2.614V24.614q-.019-3.181-1.348-4.735-1.33-1.563-4.24-1.563-2.436 0-4.313 1.527-1.878 1.527-2.776 4.115V40.21H29.1V6.52h2.615zm31.23 34.131q-3.028 0-5.473-1.491-2.443-1.491-3.8-4.16-1.365-2.659-1.365-5.974v-.944q0-3.423 1.33-6.163 1.329-2.74 3.692-4.312 2.372-1.563 5.139-1.563 4.322 0 6.855 2.946 2.534 2.947 2.534 8.06v1.473H54.92v.503q0 4.034 2.31 6.72 2.317 2.687 5.82 2.687 2.112 0 3.72-.764 1.618-.773 2.93-2.462l1.643 1.258q-2.892 4.186-8.4 4.186zm-.477-22.37q-2.965 0-4.996 2.165-2.03 2.174-2.461 5.84h14.231v-.288q-.108-3.423-1.95-5.57-1.841-2.147-4.824-2.147zm25.524-1.959-.063 2.39q-.835-.153-1.778-.153-2.453 0-4.16 1.375-1.698 1.375-2.417 3.98V40.21H76.96V16.474h2.57l.044 3.773q2.084-4.205 6.684-4.205 1.096 0 1.734.279zm20.988 23.89h-2.803q-.396-1.124-.504-3.316-1.383 1.806-3.521 2.776-2.139.98-4.528.98-3.423 0-5.544-1.914-2.111-1.905-2.111-4.825 0-3.459 2.884-5.48 2.884-2.022 8.032-2.022h4.762v-2.695q0-2.542-1.564-3.998-1.572-1.464-4.573-1.464-2.749 0-4.546 1.401-1.797 1.41-1.797 3.378l-2.632-.018q0-2.83 2.632-4.905 2.633-2.066 6.469-2.066 3.971 0 6.262 1.985 2.291 1.977 2.363 5.534v11.23q0 3.442.719 5.158zm-11.051-1.887q2.632 0 4.708-1.276 2.066-1.267 3.01-3.396v-5.22h-4.69q-3.926.045-6.146 1.437-2.21 1.393-2.21 3.828 0 1.994 1.474 3.315 1.482 1.311 3.854 1.311zm32.038-7.457V8.27h2.722v22.443q0 4.537-2.623 7.241-2.615 2.695-7.026 2.695-4.654 0-7.151-2.434-2.498-2.435-2.498-6.802h2.695q0 3.469 1.824 5.211 1.815 1.744 5.13 1.744 3.046 0 4.968-2.022 1.923-2.012 1.96-5.48zm8.553-2.345v-.53q0-3.423 1.33-6.163t3.755-4.268q2.417-1.518 5.49-1.518 4.734 0 7.681 3.315 2.938 3.324 2.938 8.813v.548q0 3.441-1.33 6.19-1.33 2.759-3.737 4.25-2.417 1.491-5.507 1.491-4.717 0-7.664-3.324-2.956-3.324-2.956-8.804zm2.632-.288v.486q0 4.249 2.21 6.98 2.202 2.732 5.778 2.732 3.557 0 5.759-2.732 2.2-2.731 2.2-7.205v-.503q0-2.723-1.006-4.978-1.006-2.264-2.83-3.494-1.824-1.24-4.168-1.24-3.504 0-5.724 2.75-2.218 2.748-2.218 7.204zm39.29 11.976-.046-3q-2.372 3.44-7.574 3.44-3.79 0-5.767-2.21-1.968-2.2-2.013-6.522V16.474h2.606v15.12q0 6.775 5.489 6.775 5.696 0 7.214-4.717V16.474h2.633V40.21zm20.394-23.889-.063 2.39q-.836-.153-1.78-.153-2.461 0-4.159 1.375t-2.426 3.98V40.21h-2.605V16.474h2.57l.035 3.773q2.085-4.205 6.693-4.205 1.097 0 1.735.279zm4.078.153h2.498l.09 4.06q1.338-2.191 3.333-3.341 1.995-1.15 4.411-1.15 3.81 0 5.678 2.147 1.869 2.147 1.887 6.45v15.57h-2.614V24.614q-.018-3.181-1.348-4.735-1.32-1.563-4.24-1.563-2.435 0-4.313 1.527-1.878 1.527-2.776 4.115V40.21h-2.606zm42.46 23.736h-2.803q-.395-1.123-.512-3.315-1.375 1.806-3.513 2.776-2.138.98-4.537.98-3.414 0-5.534-1.914-2.12-1.905-2.12-4.825 0-3.459 2.883-5.48 2.884-2.022 8.041-2.022h4.762v-2.695q0-2.542-1.572-3.998-1.563-1.464-4.573-1.464-2.74 0-4.538 1.401-1.796 1.41-1.796 3.378l-2.633-.018q0-2.83 2.633-4.905 2.632-2.066 6.468-2.066 3.972 0 6.263 1.985 2.29 1.977 2.362 5.534v11.23q0 3.442.72 5.158v.26zm-11.05-1.886q2.632 0 4.698-1.276 2.076-1.267 3.02-3.396v-5.22h-4.69q-3.927.045-6.146 1.437-2.219 1.393-2.219 3.828 0 1.994 1.482 3.315 1.483 1.311 3.854 1.311zm20.259-31.805v33.692h-2.632V6.519Z"
									class="undefined-text-0"
									data-fill-palette-color="primary"
									style="stroke-width:.301473"
								/>
							</svg>
						</div>
						<div class="md:w-0 md:opacity-0">
							<svg
								xmlns="http://www.w3.org/2000/svg"
								width="37.5"
								height="47.17"
								viewBox="-1 0 35.344 47.17"
							>
								<g fill="#729343" data-fill-palette-color="accent" style="display:inline">
									<path
										d="M938.367 127.157a3.645 3.645 0 0 1-2.195-.733l-29.306-21.98a3.664 3.664 0 0 1 4.396-5.861l29.306 21.98a3.664 3.664 0 0 1-2.2 6.594zm21.98 29.307c-.737 0-1.48-.222-2.126-.683l-51.287-36.633a3.664 3.664 0 0 1 4.259-5.962l51.286 36.633a3.664 3.664 0 0 1-2.132 6.645z"
										data-fill-palette-color="accent"
										style="display:inline"
										transform="translate(-265.22) scale(.30147)"
									/>
									<path
										d="M292.696 4.011c.459-.52.33-1.33-.268-1.682A16.848 16.848 0 0 0 283.876 0c-4.189 0-8.146 1.535-11.144 4.322-3.07 2.853-4.76 6.696-4.76 10.82.001 7.34 2.21 7.286 2.21 0 0-7.13 6.143-12.933 13.694-12.933 2.184 0 4.34.487 6.31 1.428"
										data-fill-palette-color="accent"
										style="display:inline;fill:#729343;fill-opacity:1;stroke-width:.11044"
										transform="translate(-264.657)"
									/>
									<path
										d="M316 469.553H136c-5.523 0-10-4.478-10-10V335.148c0-5.522 4.477-10 10-10s10 4.478 10 10v114.404h160v-100c0-5.522 4.478-10 10-10h50v-15.596c0-5.522 4.478-10 10-10s10 4.478 10 10v25.596c0 5.522-4.478 10-10 10h-50v100c0 5.523-4.478 10.001-10 10.001zM192.137 78.763c-4.155-4.71-2.99-12.039 2.421-15.227C217.954 49.74 244.732 42.447 272 42.447c37.925 0 73.761 13.897 100.906 39.13C400.695 107.409 416 142.204 416 179.553v80c0 5.522-4.478 10-10 10h-20v4.404c0 5.522-4.478 10-10 10s-10-4.478-10-10v-14.404c0-5.523 4.478-10 10-10h20v-70c0-64.572-55.626-117.105-124-117.105a132.681 132.681 0 0 0-57.146 12.923m-68.856 130.54.002 79.237c0 5.523-4.477 10-10 10s-10-4.478-10-10V186.49c0-8.624 13.547-5.724 19.998 0"
										data-fill-palette-color="accent"
										style="display:inline"
										transform="translate(-10.6 -4.688) scale(.11044)"
									/>
									<g id="right-leaf-sm" class:before-load-right-sm={!loaded} class:hover>
										<path
											d="M933.114 21.7c-17.02 5.479-17.166 5.333-17.166 5.333s-3.125 31.696-7.195 34.12c-4.07 2.426 20.855-7.969 22.974-16.88 2.118-8.913 3.871-9.205 1.387-22.573z"
											style="display:inline;fill:{dark ? '#262626' : '#fefbf6'};fill-opacity:1"
											transform="translate(-262.387 .252) scale(.30147)"
										/>
										<path
											d="M190.384 219.553a10.003 10.003 0 0 1-9.763-7.872 112.09 112.09 0 0 1-1.531-7.686 9.999 9.999 0 0 1 6.983-11.209c6.763-6.322 12.394-13.482 16.768-21.33 6.732-12.081 10.153-25.109 10.167-38.721v-.092c0-5.103-.502-10.234-1.493-15.253a10.002 10.002 0 0 1 3.593-9.769 101.022 101.022 0 0 1 19.383-12.077c11.55-5.495 24.076-8.857 37.227-9.996a10.005 10.005 0 0 1 10.586 7.63c2.038 8.492 3.071 17.134 3.071 25.685 0 4.483-.287 8.984-.853 13.377-2.151 16.729-8.185 32.068-17.931 45.591-9.969 13.834-22.952 24.571-38.586 31.911-11.182 5.25-23.305 8.512-36.035 9.696l-.344.037.103-.01a15.84 15.84 0 0 1-.552.055 9.208 9.208 0 0 1-.793.033zm41.792-99.68c.553 4.238.832 8.512.832 12.771v.113c-.018 17.053-4.29 33.349-12.697 48.436a105.662 105.662 0 0 1-9.237 13.865 84.817 84.817 0 0 0 8.433-3.417c12.52-5.878 22.903-14.458 30.861-25.501 7.779-10.794 12.597-23.058 14.32-36.451.457-3.551.688-7.192.688-10.825 0-4.043-.284-8.116-.849-12.182-7.508 1.394-14.691 3.711-21.444 6.923a81.354 81.354 0 0 0-10.907 6.268z"
											data-fill-palette-color="accent"
											style="display:inline"
											transform="translate(-10.6 -4.688) scale(.11044)"
										/>
									</g>
									<g id="left-leaf-sm" class:before-load-left-sm={!loaded} class:hover>
										<path
											d="M885.637 20.6c17.02 5.478 17.166 5.332 17.166 5.332s3.125 31.696 7.195 34.12c4.07 2.426-20.855-7.969-22.973-16.88-2.119-8.912-3.872-9.205-1.388-22.572z"
											style="display:inline;fill:{dark ? '#262626' : '#fefbf6'};fill-opacity:1"
											transform="translate(-265.22) scale(.30147)"
										/>
										<path
											d="M914.331 64.856c-.112 0-.225-.005-.338-.015-4.67-.433-9.118-1.628-13.22-3.554a36.805 36.805 0 0 1-8.794-5.78 36.24 36.24 0 0 1-5.341-5.91c-3.57-4.954-5.78-10.573-6.569-16.702a38.61 38.61 0 0 1-.312-4.902c0-3.132.378-6.297 1.125-9.408a3.666 3.666 0 0 1 3.878-2.795c4.818.417 9.406 1.65 13.637 3.662a37.178 37.178 0 0 1 5.6 3.307l.205.145c.214.15.428.302.636.46a3.663 3.663 0 0 1 1.372 3.687 28.96 28.96 0 0 0-.64 6.007c0 5.063 1.27 9.878 3.777 14.34 1.755 3.126 4.07 5.962 6.88 8.433a3.663 3.663 0 0 1 1.196 2.153 34.3 34.3 0 0 0 .47 2.356 3.664 3.664 0 0 1-3.562 4.516zm-26.937-41.324a32.532 32.532 0 0 0-.31 4.461c0 1.33.085 2.665.252 3.967.631 4.907 2.396 9.399 5.246 13.353a28.906 28.906 0 0 0 4.26 4.714 29.469 29.469 0 0 0 7.045 4.628c.68.319 1.37.613 2.073.882a38.482 38.482 0 0 1-3-4.55c-3.086-5.492-4.717-11.682-4.717-17.9v-.038c.002-1.7.126-3.405.368-5.096a29.36 29.36 0 0 0-3.361-1.885 31.747 31.747 0 0 0-7.856-2.536z"
											data-fill-palette-color="accent"
											style="display:inline;stroke-width:.366334"
											transform="translate(-265.22) scale(.30147)"
										/>
									</g>
									<path
										d="M164.143 73.92c-50.767 0-51.695 113.017-.105 113.017 53.588 0 51.966-113.017.105-113.017z"
										style="display:inline;fill:{dark ? '#262626' : '#fefbf6'};fill-opacity:
										{loaded ? 1 : 0};stroke-width:2.72975"
										transform="translate(-7.767 -4.436) scale(.11044)"
									/>
									<path
										d="M164.014 210.716a9.98 9.98 0 0 1-6.544-2.438 26.47 26.47 0 0 1-.584-.522l-.186-.168c-9.365-8.231-17.108-17.734-23.009-28.24-8.423-14.991-12.875-31.888-12.875-48.863v-.101a99.032 99.032 0 0 1 2.192-20.557 100.912 100.912 0 0 1 10.251-27.418c6.167-11.2 14.372-21.243 24.39-29.848a10.001 10.001 0 0 1 13.048.013 111.996 111.996 0 0 1 10.797 10.683c5.386 6.108 10.031 12.747 13.81 19.735 4.82 8.922 8.248 18.424 10.187 28.246a99.004 99.004 0 0 1 1.872 19.125v.103c-.018 17.063-4.29 33.36-12.697 48.447-6.143 11.02-14.262 20.907-24.134 29.388a9.985 9.985 0 0 1-6.518 2.415zm.13-136.796c-5.283 5.515-9.76 11.588-13.365 18.136a80.846 80.846 0 0 0-6.627 15.796 79.71 79.71 0 0 0-1.586 6.157 79.053 79.053 0 0 0-1.75 16.398c0 13.82 3.47 26.965 10.312 39.144 3.508 6.246 7.834 12.069 12.91 17.386 5.178-5.408 9.586-11.356 13.156-17.762 6.732-12.081 10.153-25.11 10.167-38.721v-.092a78.93 78.93 0 0 0-1.493-15.252c-1.55-7.85-4.295-15.456-8.16-22.61-3.058-5.654-6.832-11.043-11.216-16.016a91.518 91.518 0 0 0-2.349-2.564z"
										data-fill-palette-color="accent"
										style="display:inline"
										transform="translate(-7.767 -4.436) scale(.11044)"
									/>
								</g>
							</svg>
						</div>
					</a>
				</div>

				{#if $user}
					<li aria-current={$page.url.pathname === '/dashboard' ? 'page' : undefined}>
						<a href="/dashboard">Dashboard</a>
					</li>
					<li aria-current={$page.url.pathname === '/shared' ? 'page' : undefined}>
						<a href="/shared">Shared</a>
					</li>
				{/if}
			</ul>
		</nav>

		{#if $user}
			<NavPopover />
		{:else if $page.url.pathname === '/' || $page.url.pathname === '/login'}
			<!-- hide on root page -->
		{:else}
			<div
				class="hover: flex h-[48px] content-center hover:text-primary active:text-primary-dark dark:text-neutral-200"
			>
				<a href="/login" class="">Log in</a>
			</div>
		{/if}
	</div>
</header>

<style>
	#left-leaf {
		transition: 0.5s transform ease-out, 0.5s opacity cubic-bezier(0, 1.65, 0.105, 0.645);
		transform-origin: 275px 20px;
	}

	.before-load-left {
		transform: rotate(39deg) translate(-2px, 0.1px);
		opacity: 0;
	}

	div:hover #left-leaf.hover {
		transform: rotate(-4deg);
		transition-duration: 0.2;
	}

	#right-leaf {
		transition: 0.5s transform ease-out, 0.5s opacity cubic-bezier(0, 1.65, 0.105, 0.645);
		transform-origin: 270px 20px;
	}

	.before-load-right {
		transform: rotate(-38deg) translate(0.5px, 3px);
		opacity: 0;
	}

	div:hover #right-leaf.hover {
		transform: rotate(4deg);
		transition-duration: 0.2;
	}

	#left-leaf-sm {
		transition: 0.5s transform ease-out, 0.5s opacity cubic-bezier(0, 1.65, 0.105, 0.645);
		transform-origin: 11px 19.42px;
	}

	.before-load-left-sm {
		transform: rotate(30.5deg);
		opacity: 0;
	}

	div:hover #left-leaf-sm.hover {
		transform: rotate(-4deg);
		transition-duration: 0.2;
	}

	#right-leaf-sm {
		transition: 0.5s transform ease-out, 0.5s opacity cubic-bezier(0, 1.65, 0.105, 0.645);
		transform-origin: 9px 19px;
	}

	.before-load-right-sm {
		opacity: 0;
		transform: rotate(-33.5deg) translate(0.1px, 0);
	}

	div:hover #right-leaf-sm.hover {
		transform: rotate(4deg);
		transition-duration: 0.2;
	}

	ul {
		position: relative;
		padding: 0;
		margin: 0;
		height: 3em;
		display: flex;
		justify-content: center;
		align-items: center;
		list-style: none;
		background: var(--background);
		background-size: contain;
	}

	li {
		position: relative;
		height: 100%;
	}

	li[aria-current='page']::before {
		--size: 3px;
		content: '';
		display: block;
		width: 85%;
		height: 2px;
		position: absolute;
		bottom: 8px;
		left: 7.5%;
		border-bottom: var(--size) solid var(--light-green);
	}

	nav a {
		display: flex;
		height: 100%;
		align-items: center;
		padding: 0 0.5rem;
		/* color: rgba(0, 0, 0, 0.7); */
		font-weight: 700;
		font-size: 0.8rem;
		text-transform: uppercase;
		letter-spacing: 0.1em;
		text-decoration: none;
		transition: color 0.2s linear;
		@apply text-neutral-900 dark:text-neutral-300;
	}

	nav a:hover {
		@apply text-primary-light;
	}
</style>
